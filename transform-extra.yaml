# ======= Aligning nrf52/nrf53 with nrf54
  - !RenameFields
      fieldset: .*::regs::Shorts.*
      from: lastrx_starttx
      to: lastrx_dma_tx_start
  - !RenameFields
      fieldset: .*::regs::Shorts.*
      from: lasttx_startrx
      to: lasttx_dma_rx_start
# ======= Aligning nrf52/nrf53 with nrf54 spim
  - !MakeBlock
      blocks: spim::Spim
      from: (txd|rxd)
      to_outer: dma
      to_inner: $1$2
      to_block: spim::Dma
  - !RenameRegisters
      block: spim::Dma
      from: rxd
      to: rx
  - !RenameRegisters
      block: spim::Dma
      from: txd
      to: tx
  - !Rename
      from: spim::Txd
      to: spim::DmaTx
  - !Rename
      from: spim::Rxd
      to: spim::DmaRx
  - !MakeBlock
      blocks: spim::Spim
      from: tasks_(.+)(tx|rx)
      to_outer: tasks_dma
      to_inner: $1$2
      to_block: spim::TasksDma
  - !MakeBlock
      blocks: spim::TasksDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: spim::TasksDmaTx
  - !MakeBlock
      blocks: spim::TasksDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: spim::TasksDmaRx
# ======= Aligning nrf52/nrf53 with nrf54 spis
  - !MakeBlock
      blocks: spis::Spis
      from: (txd|rxd)
      to_outer: dma
      to_inner: $1$2
      to_block: spis::Dma
  - !RenameRegisters
      block: spis::Dma
      from: rxd
      to: rx
  - !RenameRegisters
      block: spis::Dma
      from: txd
      to: tx
  - !Rename
      from: spis::Txd
      to: spis::DmaTx
  - !Rename
      from: spis::Rxd
      to: spis::DmaRx
  - !MakeBlock
      blocks: spis::Spis
      from: tasks_(.+)(tx|rx)
      to_outer: tasks_dma
      to_inner: $1$2
      to_block: spis::TasksDma
  - !MakeBlock
      blocks: spis::TasksDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: spis::TasksDmaTx
  - !MakeBlock
      blocks: spis::TasksDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: spis::TasksDmaRx
  - !MakeBlock
      blocks: spis::Spis
      from: events_(.+)(tx|rx)
      to_outer: events_dma
      to_inner: $1$2
      to_block: spis::EventsDma
  - !MakeBlock
      blocks: spis::EventsDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: spis::EventsDmaTx
  - !MakeBlock
      blocks: spis::EventsDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: spis::EventsDmaRx
# ======= Aligning nrf52/nrf53 with nrf54 twim
  - !MakeBlock
      blocks: twim::Twim
      from: (txd|rxd)
      to_outer: dma
      to_inner: $1$2
      to_block: twim::Dma
  - !RenameRegisters
      block: twim::Dma
      from: rxd
      to: rx
  - !RenameRegisters
      block: twim::Dma
      from: txd
      to: tx
  - !Rename
      from: twim::Txd
      to: twim::DmaTx
  - !Rename
      from: twim::Rxd
      to: twim::DmaRx
  - !MakeBlock
      blocks: twim::Twim
      from: tasks_(.+)(tx|rx)
      to_outer: tasks_dma
      to_inner: $1$2
      to_block: twim::TasksDma
  - !MakeBlock
      blocks: twim::TasksDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: twim::TasksDmaTx
  - !MakeBlock
      blocks: twim::TasksDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: twim::TasksDmaRx
# ======= Aligning nrf52/nrf53 with nrf54 twis
  - !MakeBlock
      blocks: twis::Twis
      from: (txd|rxd)
      to_outer: dma
      to_inner: $1$2
      to_block: twis::Dma
  - !RenameRegisters
      block: twis::Dma
      from: rxd
      to: rx
  - !RenameRegisters
      block: twis::Dma
      from: txd
      to: tx
  - !Rename
      from: twis::Txd
      to: twis::DmaTx
  - !Rename
      from: twis::Rxd
      to: twis::DmaRx
  - !MakeBlock
      blocks: twis::Twis
      from: tasks_(enablematch|disablematch)
      to_outer: tasks_dma
      to_inner: $1$2
      to_block: twis::TasksDma
  - !MakeBlock
      blocks: twis::TasksDma
      from: (.+)
      to_outer: rx
      to_inner: $1
      to_block: twis::TasksDmaRx
  - !MakeBlock
      blocks: twis::Twis
      from: events_(.+)(tx|rx)
      to_outer: events_dma
      to_inner: $1$2
      to_block: twis::EventsDma
  - !MakeBlock
      blocks: twis::EventsDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: twis::EventsDmaTx
  - !MakeBlock
      blocks: twis::EventsDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: twis::EventsDmaRx
# ======= Aligning nrf52/nrf53 with nrf54 uarte
  - !MakeBlock
      blocks: uarte::Uarte
      from: (txd|rxd)
      to_outer: dma
      to_inner: $1$2
      to_block: uarte::Dma
  - !RenameRegisters
      block: uarte::Dma
      from: rxd
      to: rx
  - !RenameRegisters
      block: uarte::Dma
      from: txd
      to: tx
  - !Rename
      from: uarte::Txd
      to: uarte::DmaTx
  - !Rename
      from: uarte::Rxd
      to: uarte::DmaRx
  - !MakeBlock
      blocks: uarte::Uarte
      from: tasks_(.+)(tx|rx)
      to_outer: tasks_dma
      to_inner: $1$2
      to_block: uarte::TasksDma
  - !MakeBlock
      blocks: uarte::TasksDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: uarte::TasksDmaTx
  - !MakeBlock
      blocks: uarte::TasksDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: uarte::TasksDmaRx
  - !RenameRegisters
      block: uarte::Uarte
      from: events_txstarted
      to: events_readytx
  - !RenameRegisters
      block: uarte::Uarte
      from: events_rxstarted
      to: events_readyrx
  - !RenameFields
      fieldset: uarte::regs::Int
      from: endrx
      to: dmarxend
  - !RenameFields
      fieldset: uarte::regs::Int
      from: rxstarted
      to: dmarxready
  - !RenameFields
      fieldset: uarte::regs::Int
      from: txstarted
      to: dmatxready
  - !RenameFields
      fieldset: uarte::regs::Int
      from: endtx
      to: dmatxend
  - !RenameFields
      fieldset: uarte::regs::Int
      from: set_endrx
      to: set_dmarxend
  - !RenameFields
      fieldset: uarte::regs::Int
      from: set_endtx
      to: set_dmatxend
  - !MakeBlock
      blocks: uarte::Uarte
      from: events_(.+)(tx|rx)
      to_outer: events_dma
      to_inner: $1$2
      to_block: uarte::EventsDma
  - !MakeBlock
      blocks: uarte::EventsDma
      from: (.+)tx
      to_outer: tx
      to_inner: $1
      to_block: uarte::EventsDmaTx
  - !MakeBlock
      blocks: uarte::EventsDma
      from: (.+)rx
      to_outer: rx
      to_inner: $1
      to_block: uarte::EventsDmaRx
# ======= Aligning nrf52/nrf53 with nrf54 gpiote
  - !MakeRegisterArray
      blocks: gpiote::Gpiote
      from: inten(.+)
      to: inten$1
  - !MakeRegisterArray
      blocks: gpiote::Gpiote
      from: events_port
      to: events_port
# ======= Aligning nrf52/nrf53 with nrf54 pwm
  - !MakeBlock
      blocks: pwm::Pwm
      from: seq
      to_outer: dma
      to_inner: seq
      to_block: pwm::Dma
  - !Rename
      from: pwm::Seq
      to: pwm::DmaSeq
  - !RenameRegisters
      block: pwm::DmaSeq
      from: cnt
      to: maxcnt
  - !MakeBlock
      blocks: pwm::Pwm
      from: tasks_seqstart
      to_outer: tasks_dma
      to_inner: seqstart
      to_block: pwm::TasksDma
  - !MakeBlock
      blocks: pwm::TasksDma
      from: seqstart
      to_inner: start
      to_outer: seq
      to_block: pwm::TasksDmaSeq
      array_on_outer: true
  - !RenameFields
      fieldset: .*::regs::Shorts.*
      from: loopsdone_seqstart0
      to: loopsdone_dma_seq0_start
